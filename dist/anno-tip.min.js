var AnnoTip=function(t,e){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;function n(e,o){var i=this;this.element=e,this.options=t.extend(!0,{},n.options,o),this.onSelection=this.options.onSelection,void 0!==this.element.ownerDocument&&null!==this.element.ownerDocument?(this.document=this.element.ownerDocument,t(this.document.body).on("mouseup.".concat("annotip-text"),(function(t){i._checkForEndSelection(t)}))):console.warn("You created an instance of the TextSelector on an element that doesn't have an ownerDocument. This won't work! Please ensure the element is added to the DOM before the plugin is configured:",this.element)}n.prototype.destroy=function(){this.document&&t(this.document.body).off(".".concat("annotip-text"))},n.prototype.captureDocumentSelection=function(){var t=0,e=0,n=[],o=[],i=window.getSelection();if(i.isCollapsed)return[];for(t=0;t<i.rangeCount;t++){var l=i.getRangeAt(t),r=l.normalize().limit(this.element);null===r?o.push(l):n.push(r)}for(i.removeAllRanges(),t=0,e=o.length;t<e;t++)i.addRange(o[t]);for(t=0,e=n.length;t<e;t++){var a=n[t],c=this.document.createRange();c.setStartBefore(a.start),c.setEndAfter(a.end),i.addRange(c)}return n},n.prototype._checkForEndSelection=function(e){var n=this,o=function(){"function"==typeof n.onSelection&&n.onSelection([],e)},i=this.captureDocumentSelection();if(0!==i.length){for(var l=0,r=i.length;l<r;l++){var a=i[l].commonAncestor;if(t(a).hasClass("annotator-hl")&&(a=t(a).parents("[class!=annotator-hl]")[0]),0!==t(a).parents().addBack().filter("[class^=annotator-]").length)return void o()}"function"==typeof this.onSelection&&this.onSelection(i,e)}else o()},n.options={onSelection:null};var o={subject:null,textSelection:!0,elementSelection:!0,tippySettings:{},extractContext:null,prepareUI:null,storeAnno:null,applyAnno:null};function i(i){this.settings=t.extend(!0,{},o,i),this.textSel=new n,this.tp=new e}return i.prototype.attach=function(e){t(e).val("annotip-main")},i.prototype.applyAnnos=function(t){t.test=""},i.prototype.detach=function(e){t(e).val("")},i.prototype.onTrigger=function(){},i.prototype.showUI=function(t){t.val("")},i.prototype.hideUI=function(){},i}($,tippy);
//# sourceMappingURL=anno-tip.min.js.map
